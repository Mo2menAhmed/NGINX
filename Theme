Nginx Web server Docker file

FROM nginx
RUN echo "IT WORKS !!!!! NGINX WEBSERVER" > /usr/share/nginx/html/index.html


NGINX DEPLOYMENT:

apiVersion: apps/v1beta2
kind: Deployment
metadata:
 name: new-nginx-deployment
spec:
 selector:
  matchLabels:
   app: new-nginx1
 replicas: 2
 template:
  metadata:
   labels:
    app: new-nginx1
  spec:
   containers:
   - name: new-nginx
     image: docker.io/giriraj789/new-nginx1
     ports:
     - containerPort: 80
     
     
     

kubectl expose deployment new-nginx-deployment --type=NodePort --port=80 -n nginx



INIT container:
apiVersion: v1
kind: Pod
metadata:
  name: myapp-pod
  labels:
    app: myapp
spec:
  containers:
  - name: myapp-container
    image: busybox
    imagePullPolicy: IfNotPresent
    command: ['sh', '-c', 'echo The app is running! && sleep 3600']
  initContainers:
  - name: init-myservice
    image: busybox
    imagePullPolicy: IfNotPresent
    command: ['sh', '-c', 'echo waiting to get ready! && sleep 60']
    
    
    
    Proxy:
    
    curl http://localhost:8081/api/v1/namespaces/default/pods



